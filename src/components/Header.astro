---
// Header.astro - Main navigation header with orbiting switch icon
---

<header class="sticky top-0 z-50 backdrop-blur-xl bg-background/80 border-b border-border">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      
      <!-- Logo with Orbiting Switch -->
      <div class="flex items-center space-x-4">
        <a href="/" class="flex items-center space-x-3 group">
          <div class="relative">
            <!-- Main logo text -->
            <span class="text-2xl font-bold text-gradient">THOCKVERSE</span>
            
            <!-- Orbiting switch icon -->
            <div class="absolute -top-2 -right-2 w-8 h-8">
              <div class="orbital">
                <div class="w-4 h-4 bg-gradient-to-br from-primary-400 to-accent-400 rounded shadow-lg neon-glow">
                  <!-- Switch stem -->
                  <div class="w-2 h-1 bg-white/80 rounded-sm mx-auto mt-1"></div>
                </div>
              </div>
            </div>
          </div>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center space-x-8">
        <a href="/reviews" class="nav-link">Reviews</a>
        <a href="/switches" class="nav-link">Switches</a>
        <a href="/tutorials" class="nav-link">Tutorials</a>
        <a href="/critical-takes" class="nav-link">Critical Takes</a>
        <a href="/news" class="nav-link">News</a>
      </nav>

      <!-- Search & Theme Toggle -->
      <div class="flex items-center space-x-4">
        
        <!-- Search Bar -->
        <div class="hidden sm:block relative">
          <div class="relative">
            <input 
              type="search" 
              placeholder="Search switches..."
              class="w-64 px-4 py-2 pl-10 pr-4 rounded-lg bg-input border border-border text-foreground placeholder-muted-foreground focus-space"
            >
            <!-- Search Icon -->
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="h-5 w-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
          </div>
        </div>

        <!-- Theme Toggle Button -->
        <button 
          id="theme-toggle"
          class="theme-toggle-btn relative p-2 rounded-lg hover:bg-white/10 transition-colors duration-200"
          aria-label="Toggle theme"
        >
          <!-- Planet (Light Mode) Icon -->
          <div class="planet-icon absolute inset-0 flex items-center justify-center opacity-100 dark:opacity-0 transition-opacity duration-300">
            <svg class="w-6 h-6 text-yellow-400" fill="currentColor" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="5"/>
              <path d="m12 1-3 6 3 1 3-1-3-6zM12 23l-3-6 3-1 3 1-3 6zM1 12l6 3 1-3-1-3-6 3zM23 12l-6 3-1-3 1-3 6 3z"/>
            </svg>
          </div>

          <!-- Star (Dark Mode) Icon -->
          <div class="star-icon absolute inset-0 flex items-center justify-center opacity-0 dark:opacity-100 transition-opacity duration-300">
            <svg class="w-6 h-6 text-blue-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
          </div>
        </button>

        <!-- Mobile Menu Button -->
        <button 
          id="mobile-menu-button"
          class="md:hidden p-2 rounded-lg hover:bg-white/10 transition-colors duration-200"
          aria-label="Open menu"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Navigation Menu -->
    <div id="mobile-menu" class="md:hidden hidden">
      <div class="px-2 pt-2 pb-3 space-y-1 border-t border-white/10 mt-4">
        <a href="/reviews" class="block px-3 py-2 rounded-md text-base font-medium nav-link">Reviews</a>
        <a href="/switches" class="block px-3 py-2 rounded-md text-base font-medium nav-link">Switches</a>
        <a href="/tutorials" class="block px-3 py-2 rounded-md text-base font-medium nav-link">Tutorials</a>
        <a href="/critical-takes" class="block px-3 py-2 rounded-md text-base font-medium nav-link">Critical Takes</a>
        <a href="/news" class="block px-3 py-2 rounded-md text-base font-medium nav-link">News</a>
        
        <!-- Mobile Search -->
        <div class="pt-4">
          <input 
            type="search" 
            placeholder="Search switches..."
            class="w-full px-4 py-2 rounded-lg bg-input border border-border text-foreground placeholder-muted-foreground focus-space"
          >
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // Theme toggle functionality
  const themeToggle = document.getElementById('theme-toggle');
  const html = document.documentElement;
  
  // Check for saved theme or default to dark
  const savedTheme = localStorage.getItem('theme');
  const currentTheme = savedTheme || 'dark';
  
  // Apply theme
  if (currentTheme === 'dark') {
    html.classList.add('dark');
    html.classList.remove('light');
  } else {
    html.classList.remove('dark');
    html.classList.add('light');
  }
  
  // Toggle theme
  themeToggle?.addEventListener('click', () => {
    const isDark = html.classList.contains('dark');
    
    if (isDark) {
      html.classList.remove('dark');
      html.classList.add('light');
      localStorage.setItem('theme', 'light');
    } else {
      html.classList.add('dark');
      html.classList.remove('light');
      localStorage.setItem('theme', 'dark');
    }
  });
  
  // Mobile menu toggle
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  mobileMenuButton?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  // Search functionality placeholder
  const searchInputs = document.querySelectorAll('input[type="search"]');
  searchInputs.forEach(input => {
    input.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const query = input.value;
        if (query.trim()) {
          // Navigate to search results page
          window.location.href = `/search?q=${encodeURIComponent(query)}`;
        }
      }
    });
  });

  // Add current page active state
  const currentPath = window.location.pathname;
  const navLinks = document.querySelectorAll('.nav-link');
  navLinks.forEach(link => {
    if (link.getAttribute('href') === currentPath) {
      link.classList.add('active');
    }
  });
</script>

<style>
  /* Enhanced orbital animation */
  @keyframes orbit {
    0% { 
      transform: rotate(0deg) translateX(16px) rotate(0deg); 
    }
    100% { 
      transform: rotate(360deg) translateX(16px) rotate(-360deg); 
    }
  }
  
  .orbital {
    animation: orbit 8s linear infinite;
  }
  
  /* Logo hover effect */
  .group:hover .orbital {
    animation-duration: 2s;
  }
  
  /* Theme toggle smooth transitions */
  .theme-toggle-btn {
    overflow: hidden;
  }
  
  /* Mobile menu slide animation */
  #mobile-menu {
    animation: slide-down 0.3s ease-out;
  }
  
  #mobile-menu.hidden {
    animation: slide-up 0.3s ease-out;
  }
</style>